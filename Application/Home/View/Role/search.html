   <!-- jquery - boot -库文件 -->
    <script src="__PUBLIC__/static/script/jquery.1.11.1.js"></script>
    <script src="__PUBLIC__/static/script/bootstrap.min.js"></script>
    <!-- Bootstrap -->
    <link href="__PUBLIC__/static/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap -->
    <!-- 自定义 css -->
    <link rel="stylesheet" type="text/css" href="__PUBLIC__/static/css/reset.css">
    <link rel="stylesheet" type="text/css" href="__PUBLIC__/static/css/common.css">
    <link rel="stylesheet" type="text/css" href="__PUBLIC__/static/css/style.css">
    <!-- font awesome -->
    <link rel="stylesheet" type="text/css" href="__PUBLIC__/static/plugins/FontAwesome/css/font-awesome.min.css">
    <!--easyui包含文件-->
    <link rel="stylesheet" type="text/css" href="__PUBLIC__/static/plugins/easyui1.5.3/themes/material/easyui.css">
    <link rel="stylesheet" type="text/css" href="__PUBLIC__/static/plugins/easyui1.5.3/themes/icon.css">
    <script type="text/javascript" src="__PUBLIC__/static/plugins/easyui1.5.3/jquery.easyui.min.js"></script>
    <script type="text/javascript" src="__PUBLIC__/static/plugins/easyui1.5.3/locale/easyui-lang-zh_CN.js"></script>
    
    <!-- datetimepicker -->
    <script src="__PUBLIC__/static/script/common.js"></script>
    <!-- Bootstrap treeview -->
    <link rel="stylesheet" href="__PUBLIC__/static/plugins/treeview/bootstrap-treeview.min.css">
    <script src="__PUBLIC__/static/plugins/treeview/bootstrap-treeview.min.js"></script>



                    <!-- 位置导航 -->
                    <ol class="breadcrumb">
                        <li><a href="#">首页</a></li>
                        <li><a href="#">系统设置</a></li>
                        <li class="active">人员管理</li>
                    </ol>

                    <div style="float: left;width: 100%;">
                    <!-- 筛选 -->
                    <div class="searchitem">
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="btnin">
                                        <button class="btn btn-info" id="abutton">添加</button>
                                        <button class="btn btn-info" id='ebutton'>修改</button>
                                        <button class="btn btn-info" id='dell'>删除</button>
                                    </div>
                                </div>
                            </div>
                            <!-- end 筛选 -->
                        </div>
                        <!-- listtable -->
                        <div class="content">
                            <!-- gridview row -->
                            <table id="dg" style="height:400px;" title="类型列表" data-options="rownumbers:true,singleSelect:true,autoRowHeight:true,pagination:true,pageSize:40,url:'{:U("Role/get_search_list")}'">
                                <thead>
                                    <tr>
                                        <th field="fielddes" width="180">字段名</th>
                                         <th field="fieldname" width="180">字段</th>
                                        <th field="operation" width="180">判断条件</th>
                                        <th field="showvalue" width="180">显示条件</th>
                                        <th field="fieldvalue" width="180">条件值</th>
                                       
                                    </tr>
                                </thead>
                            </table>
                            <!-- end gridview row -->
                        </div>
                        <!--mainboxend-->
                    </div>


    <!-- 添加人员弹窗 -->
    <div id='emwindows'></div>

    <div id='editShow'></div>

    <!-- 编辑弹窗 -->





 <script>
    var user_id = 0;
    var _data = {};

    $("#dg").datagrid({
        onClickRow: function (index, row) {
            user_id = row.mainid
        }
    });

    // 添加弹窗
    $("#abutton").click(function() {
        $("#emwindows").empty();
        var $win;
        $win = $("#emwindows").window({
            width: 600,
            height: 400,
            modal: true,
            href: "{:U('Role/add_search')}",
            title: '添加',
            collapsible: false,
            maximizable: true,
            minimizable: false,
            onResize: function () {
                $(this).window('center');
            }
        });
        $win.window('open');
    })

    // 编辑弹窗
    $('#ebutton').click(function() {
        $("#editShow").empty();
        var $win;
        $win = $("#editShow").window({
            width: 800,
            height: 600,
            modal: true,
            href: "{:U('Role/edit_search')}" + "?userid=" + user_id,
            title: '修改',
            collapsible: false,
            maximizable: true,
            minimizable: false,
            onResize: function () {
                $(this).window('center');
            }
        });
        $win.window('open');
    })

    //删除
     $('#dell').click(function() {

        if (user_id == 0) {
            $.messager.alert('警告','请选择要删除的数据！')
            return
        }

        var msg = "确定想要删除吗？";
        $.messager.confirm('确认', msg, function(r){    
            if (r){    
                $.ajax({
                    type: 'post',
                    url: "{:U('Role/dell_search')}",
                    data: {username: user_id},
                    dataType: 'json',
                    success: function(res) {
                        console.log(res);
                        if (res.status == 0) {
                            $.messager.alert('提示','删除成功！')
                            location.reload();
                        } else {
                            $.messager.alert('提示','删除失败！')
                        }
                    }
                })
            }    
        });

     })

    function closeModuleWin(){
        $('#emwindows').window('close')
        return
    }
    </script>